---
title: "Kamino"
output:
  bookdown::gitbook: default
documentclass: book
date: "`r Sys.Date()`"
---

```{r, include=FALSE}

knitr::opts_chunk$set(message=FALSE, warning=FALSE, echo=FALSE)
options(scipen=999)  # turn-off scientific notation like 1e+48

library(tidyverse)
#library(rjson)
library(jsonlite)

library(showtext)
## Loading Google fonts (https://fonts.google.com/)
font_add_google("Inconsolata", "inconsolata")
# turn on showtext
showtext_auto()

```


INGEST  

# Nobel Prizes
## Ingest a JSON file

```{r, out.width="60%", fig.align="center", fig.cap="Photo from Wroclaw University Museum"}

masthead <- "assets/Nobel_Prize_Diploma_Fritz_Haber_1918.jpg"
knitr::include_graphics(masthead, dpi=72)

```

<div class="figure-text">Nobel Prize diploma in Chemistry awarded to Fritz Haber in 1918</div>

> His name was Jason...\
--- Mrs. Voorhees, Friday the 13th\


***

### Accessing a JSON file
#### Nobel Prizes' information

```{r load-data, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide'}

url_root <- "https://raw.githubusercontent.com/UN-AVT/kamino-source/main/sources/0-shared/data/"
url_file <- "nobel-prizes/nobel-prizes.json"
url <- paste0(url_root, url_file)

js1 <- fromJSON(url, flatten = FALSE)

df <- as.data.frame(js1)
df

```


Getting information of all Laureates of Economics Nobel Prize in 2019 by selecting the prizes.laureates column of the 2nd row of this data file. As you can see the prizes.laureates column is in fact composed by the fields: id, firstname, surname, motivation and share.

```{r, echo=TRUE, message=FALSE, warning=FALSE,class.source = 'fold-hide'}

list1 <- df$prizes.laureates[2]
df1 <- as.data.frame(list1)
df1

```

Let's make this output a little more "table friendly"

```{r, echo=TRUE, message=FALSE, warning=FALSE,class.source = 'fold-hide'}

df2 <- df %>% unnest(prizes.laureates)
df2

```


### References
#### citations for narrative and data sources

* Narrative and Data Source: Nobel Prizes information published by the Nobel Prize official website, [GO](https://www.nobelprize.org/){target="_blank"}


<pre>
@misc{thenobelprize_2018_nobelprizeorg,
  author = {The Nobel Prize},
  title = {NobelPrize.org},
  url = {https://www.nobelprize.org/},
  urldate = {2021-02-24},
  year = {2018},
  organization = {NobelPrize.org}
}
</pre>
