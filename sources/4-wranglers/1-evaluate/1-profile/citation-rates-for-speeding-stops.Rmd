---
pagetitle: "Citation Rates for Speeding Stops"
output:
  html_document:
    theme: lumen
    css: "../../../z-assemblers/assets/styles/content.css"
    df_print: paged
    mathjax: NULL
    code_folding: show
    include:
      in_header: ["../../../z-assemblers/fragments/google-analytics.html", "../../../z-assemblers/fragments/header.html"]
      after_body: "../../../z-assemblers/fragments/footer.html"
    self_contained: false
    lib_dir: vendor
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(message=FALSE, warning=FALSE, echo=FALSE)
options(scipen = 999) # turn-off scientific notation like 1e+48

# Clear environment and memory
rm(list = ls(all.names = TRUE)) #will clear all objects includes hidden objects.
gc() #free up memory and report the memory usage.

library(tidyverse)
library(showtext)
## Loading Google fonts (https://fonts.google.com/)
font_add_google("Inconsolata", "inconsolata")
# turn on showtext
showtext_auto()

```

<div class="activity">
WRANGLERS
</div>

# Citation Rates for Speeding Stops
## Profiling

```{r, out.width="60%", fig.align="center", fig.cap="Photo by Nomadsoul1 on Freepik"}

masthead <- "assets/police-citation.jpg"
knitr::include_graphics(masthead, dpi=72)

```

> If you don't want a speeding ticket, don't speed...\  
--- Ainsley Earhardt\

***

From the Stanford Open Policing Project: "On a typical day in the United States, police officers make more than 50,000 traffic stops. Our team is gathering, analyzing, and releasing records from millions of traffic stops by law enforcement agencies across the country. Our goal is to help researchers, journalists, and policymakers investigate and improve interactions between police and the public."

This example is based on summary data with the following fields, types, and definitions:

* location:	_character_,	County/District location for each incidence
* state:	_character_,	State for each incidence
* driver_race:	_character_,	driver's race
* stops_per_year:	_double_,	number of stops per year
* stop_rate:	_double_,	as percentage
* search_rate:	_double_,	as percentage
* consent_search_rate:	_double_,	as percentage
* arrest_rate:	_double_,	as percentage
* citation_rate_speeding_stops:	_double_,	as percentage
* hit_rate:	_double_,	the proportion of searches that successfully turn up contraband
* inferred_threshold:	_double_,	based off the threshold test

### Ingest data 
#### summary data

```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source='fold-hide'}

# Load
url_root <- "https://raw.githubusercontent.com/UN-AVT/kamino-source/main/sources/0-shared/data/"
url_file <- "citation-rates-for-speeding-stops/citation-rates-for-speeding-stops.csv"
url <- paste0(url_root, url_file)
df <- read.csv(url, header = TRUE)

df

```

### Wrangle data
#### number of columns and rows

<kbd>dim</kbd>

```{r message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'}

dim(df)

```

#### List keys and column types

<kbd>glimpse</kbd>

```{r message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'}

glimpse(df)

```
The above provides a little more information. For example, we see that 'location', 'state' and 'driver_race' are column of characters __char__, and 'stops_per_year' is a column of integers __int__. Whereas all the other columns are numbers __dbl__. Also notice the beginning values of each column; this is useful to get familiar with the data on hand. Some columns display a lot of NA, which indicates the absence of data.


### References
#### citations for narrative and data sources

* Narrative sources:  A large-scale analysis of racial disparities in police stops across the United States, [GO](https://arxiv.org/abs/1706.05678){target="_blank"} 
* Data sources: The Stanford Open Policing Project TidyTuesday, [GO](https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-03-19){target="_blank"}

```{r, echo=FALSE, eval=FALSE, message=FALSE, warning=FALSE, class.source='fold-hide'}

# eval = FALSE as default; run manually as chunk
# PUSH TO PRODUCTION
source("../../../z-scripts/create_production_output.R", local = knitr::knit_global())

```



```{js, message=FALSE, warning=FALSE, echo=FALSE}

// Must be included to position footer
$(function() {
  $('.main-container').after($('.footer'));
})

```

