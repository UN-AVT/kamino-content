---
pagetitle: "Vietnam Organic Market"
output:
  html_document:
    theme: lumen
    css: "../../../z-assemblers/assets/styles/content.css"
    df_print: paged
    mathjax: NULL
    code_folding: show
    include:
      in_header: ["../../../z-assemblers/fragments/google-analytics.html", "../../../z-assemblers/fragments/header.html"]
      after_body: "../../../z-assemblers/fragments/footer.html"
    self_contained: false
    lib_dir: vendor
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(message=FALSE, warning=FALSE, echo=FALSE)
options(scipen = 999) ## To disable scientific notation

# Clear environment and memory
rm(list = ls(all.names = TRUE)) # will clear all objects including hidden objects.
gc() #free up memory and report the memory usage.

# Load needed libraries
library(tidyverse)
library(reshape2)
library(ggiraph)
library(dplyr)
```

<div class="activity">
WRANGLERS
</div>

# Vietnam Organic Market
## Clean Data


```{r, out.width = "60%", fig.align = 'center', fig.cap="Photo by Ren√© DeAnda on Unsplash"}

masthead <- "assets/rene-deanda-unsplash.jpg"
knitr::include_graphics(masthead, dpi=72)

```

> When eating fruit, remember who planted the tree; when drinking clear water, remember who dug the well...\
--- Vietnamese Proverb\

***

Vietnam imports a diverse number of organic food and beverage products to meet consumer demand for items that cannot be grown or produced locally, a majority of which are fresh fruits and vegetables and processed products.  A recent report of the USDA Foreign Agriculture Service analyzed export trends and foresee Vietnam as a potential growth market for imported organic food and beverage products.  Let's take a closer look at the and use a horizontal grouped bar chart to visualize the results.

### Ingest
#### U.S. Organic Agricultural Exports to Vietnam in 2015-2020

List of Products

```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide'}

url_root <- "https://raw.githubusercontent.com/UN-AVT/kamino-source/main/sources/0-shared/data/"
url_file <- "vietnam-organic-market/usda-gats-product-group-organics.csv"
url <- paste0(url_root, url_file)

df <- read.csv(url, header = TRUE)
df

```

Exports to Vietnam

```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide'}

# Load data

url_root <- "https://raw.githubusercontent.com/UN-AVT/kamino-source/main/sources/0-shared/data/"
url_file <- "vietnam-organic-market/usda-gats-organics-vietnam-data.csv"
url <- paste0(url_root, url_file)

df <- read.csv(url, header = TRUE)
df

df$X2017 <- as.integer(df$X2017)
df$X2019 <- as.integer(df$X2019)
df$X2020 <- as.integer(df$X2020)

df

```

### Wrangle
#### removing zero values

Let's remove the zero values.


```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide'}

# Convert wide to long
#The year columns become a factored column that we can use for grouping or as a visual variable.

df_long <- melt(df, id.vars=c("Partner", "HS.Code", "Product"))
df_long

# Remove zero values

df_zero <- filter(df_long, value > 0)
df_zero

```

### References
#### The citations and data sources used for this case

* Narrative sources: Vietnam: Vietnam Organic Market, [GO](https://www.fas.usda.gov/data/vietnam-vietnam-organic-market){target="_blank"}
* Data sources: USDA, Foreign Agricultural Service, Global Agriculture Trade System (gats), [GO](https://apps.fas.usda.gov/gats/ExpressQuery1.aspx){target="_blank"}


```{r, echo=FALSE, eval=FALSE, message=FALSE, warning=FALSE, class.source='fold-hide'}

# eval = FALSE as default; run manually as chunk
# PUSH TO PRODUCTION
source("../../../z-scripts/create_production_output.R", local = knitr::knit_global())

```



```{js, message=FALSE, warning=FALSE, echo=FALSE}

// Must be included to position footer
$(function() {
  $('.main-container').after($('.footer'));
})

```