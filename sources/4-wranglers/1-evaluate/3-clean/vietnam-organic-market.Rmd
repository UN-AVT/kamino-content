---
title: "Kamino"
output:
  bookdown::gitbook: default
documentclass: book
date: "`r Sys.Date()`"
---

```{r, include=FALSE}

knitr::opts_chunk$set(message=FALSE, warning=FALSE, echo=FALSE)
options(scipen = 999) ## To disable scientific notation

# Load needed libraries
library(tidyverse)
library(reshape)

```

WRANGLERS


## Vietnam Organic Market
### Remove value


```{r, out.width = "60%", fig.align = 'center', fig.cap="Photo by Ren√© DeAnda on Unsplash"}

masthead <- "assets/rene-deanda-unsplash.jpg"
knitr::include_graphics(masthead, dpi=72)

```

> When eating fruit, remember who planted the tree; when drinking clear water, remember who dug the well...\
--- Vietnamese Proverb\

***

Vietnam imports a diverse number of organic food and beverage products to meet consumer demand for items that cannot be grown or produced locally, a majority of which are fresh fruits and vegetables and processed products.  A recent report of the USDA Foreign Agriculture Service analyzed export trends and foresee Vietnam as a potential growth market for imported organic food and beverage products.

### Ingest

U.S. Organic Agricultural Exports to Vietnam in 2015-2020

List of Products dataset

```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide'}

#Load
url_root <- "https://raw.githubusercontent.com/UN-AVT/kamino-source/main/sources/0-shared/data/"
url_file <- "vietnam-organic-market/usda-gats-product-group-organics.csv"
url <- paste0(url_root, url_file)

df <- read.csv(url, header = TRUE)
df

```

Exports to Vietnam dataset

```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide'}

# Load
url_root <- "https://raw.githubusercontent.com/UN-AVT/kamino-source/main/sources/0-shared/data/"
url_file <- "vietnam-organic-market/usda-gats-organics-vietnam-data.csv"
url <- paste0(url_root, url_file)

df <- read.csv(url, header = TRUE)
df

```

### Wrangle

Converting values from wide to long format using <kbd>melt()</kbd>

```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide'}

# Convert wide to long using melt(), function that efficiently reshape the data
# function takes the dataset and column values that has to be kept constant. Further, dataframe is converted into long format and stretches the data frame.

df_long <- melt(df, id.vars=c("Partner", "HS.Code", "Product"))
df_long

```
Removing zero values using <kbd>filter()</kbd>

```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide'}

# Remove zero values by filtering based upon the condition
df_zero <- filter(df_long, value > 0)
df_zero

```

### References
#### The citations and data sources used for this case

* Narrative sources: Vietnam: Vietnam Organic Market, [GO](https://www.fas.usda.gov/data/vietnam-vietnam-organic-market){target="_blank"}
* Data sources: USDA, Foreign Agricultural Service, Global Agriculture Trade System (gats), [GO](https://apps.fas.usda.gov/gats/ExpressQuery1.aspx){target="_blank"}

