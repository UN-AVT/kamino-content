---
title: "Kamino"
output:
  bookdown::gitbook: default
documentclass: book
date: "`r Sys.Date()`"
---

```{r, include=FALSE}

knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE, dev = "svg" )
options(scipen=999)  # turn-off scientific notation like 1e+48

library(tidyverse)
library(showtext)
## Loading Google fonts (https://fonts.google.com/)
font_add_google("Inconsolata", "inconsolata")
# turn on showtext
showtext_auto()
 
```

WRANGLERS  

# Older Versus Younger
## Remove duplicates

```{r, out.width="60%", fig.align="center", fig.cap="Photo by Paolo Bendandi on Unsplash"}

masthead <- "assets/paolo-bendandi-unsplash.jpg"
knitr::include_graphics(masthead, dpi=72)

```

> Count your age by friends, not years. Count your life by smiles, not tears.\
--- John Lennon\

***

### Ingest

age, gender, year, and population

```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source='fold-hide'}

# Load
url_root <- "https://raw.githubusercontent.com/UN-AVT/kamino-source/main/sources/0-shared/data/"
url_file <- "older-versus-younger/IHME_GBD_2017_POP.csv"
url <- paste0(url_root, url_file)

df <- read.csv(url, header = TRUE)
df

```

### Wrangle

Filter records and remove duplicates using <kbd>filter()</kbd> and <kbd>unique()</kbd>


```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source='fold-hide'}

# Filtering the records
age_levels <- c(
     "Under 5",
     "5 to 9",
     "10 to 14",
     "15 to 19",
     "20 to 24",
     "25 to 29",
     "30 to 34",
     "35 to 39",
     "40 to 44",
     "45 to 49",
     "50 to 54",
     "55 to 59",
     "60 to 64",
     "65 to 69",
     "70 to 74",
     "75 to 79",
     "80 to 84",
     "85 to 89",
     "90 to 94",
     "95 plus")


# Select and filter rows
df_wrangle  <- df[,c(2,4,6,7,11)]%>% 
   filter(str_detect(location_name, 'SDI'))%>%
   filter(sex_name!="Both")%>%
   filter(age_group_name %in% age_levels) %>% 
   filter(year_id == 2017)

# Remove duplicate records
df_wrangle <- unique(df_wrangle)
df_wrangle

```

### References
#### citations for narrative and data sources

* Narrative sources: Global Burden of Disease Study 2017 (GBD 2017) Population Estimates 1950-2017, [GO](http://ghdx.healthdata.org/record/ihme-data/gbd-2017-population-estimates-1950-2017){target="_blank"}
* Data sources: SDI, [GO](http://www.healthdata.org/taxonomy/glossary/socio-demographic-index-sdi){target="_blank"}
