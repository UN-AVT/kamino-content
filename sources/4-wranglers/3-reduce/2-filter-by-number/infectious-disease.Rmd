---
pagetitle: "Infectious Diseases in Context"
output:
  html_document:
    theme: lumen
    css: "../../../z-assemblers/assets/styles/content.css"
    df_print: paged
    mathjax: NULL
    code_folding: show
    include:
      in_header: ["../../../z-assemblers/fragments/google-analytics.html", "../../../z-assemblers/fragments/header.html"]
      after_body: "../../../z-assemblers/fragments/footer.html"
    self_contained: false
    lib_dir: "vendor"
---


```{r setup, include=FALSE}

knitr::opts_chunk$set(message=FALSE, warning=FALSE, echo=FALSE)
options(scipen=999)  # turn-off scientific notation like 1e+48

# Clear environment and memory
rm(list = ls(all.names = TRUE)) #will clear all objects includes hidden objects.
gc() #free up memory and report the memory usage.

library(tidyverse)
library(ggthemes)
library(ggrepel)
library(ggiraph)

library(showtext)
## Loading Google fonts (https://fonts.google.com/)
font_add_google("Inconsolata", "inconsolata")
# turn on showtext
showtext_auto()

```

<div class="activity">
CHARTS  
</div>

# Infectious Diseases in Context
## Scatter Quadrant


```{r, out.width = "60%", fig.align = 'center', fig.cap="Photo by Aaron Blanco Tejedor on Unsplash"}

masthead <- "assets/aaron-blanco-tejedor-unsplash.jpg"
knitr::include_graphics(masthead, dpi=72)

```

> Be safe, be smart, be kind...\
--- Dr. Tedros Adhanom Ghebreyesus, WHO Director General\

***

Infectious diseases are diseases that are caused by germs.  As we'll see with the data, these germs can be passed on in several different ways from direct and indirect contact, insect or animal bites, or through contaminated food, water, soil, or plants.  The data will also indicate the type of pathogen such as bacteria, virus, or parasite.  For this case we'll explore the many different germs and two key areas of interest: how __contagious__ they are and the __fatality__ rate if infected.

### Ingest data
#### Disease, R0, Fatality Rate, and Mode of Transmission


```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide'}

url_root <- "https://raw.githubusercontent.com/UN-AVT/kamino-source/main/sources/0-shared/data/"
url_file <- "infectious-disease/infectious-disease.csv"
url <- paste0(url_root, url_file)

df <- read.csv(url, header = TRUE, stringsAsFactors = FALSE)
df

```


### Wrangle data
#### Rename, select, clean, and cast data types


```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide'}

# Simplify the column names
df_complete <- rename(df, 
                      DISEASE = "Disease_Name", 
                      PATHOGEN = "Pathogen.type",
                      CONTAGIOUSNESS = "R0", 
                      DEADLINESS = "Case_Fatality_Rate_Percent", 
                      TRANSMISSION = "Primary_Mode_of_Transmission")

# Select only the needed
df_complete <- select(df_complete, c("N", "DISEASE", "PATHOGEN", "CONTAGIOUSNESS", "DEADLINESS", "TRANSMISSION"))

# Make sure all visual variables are proper data types
df_complete$CONTAGIOUSNESS <- as.numeric(df_complete$CONTAGIOUSNESS)
df_complete$DEADLINESS <- parse_number(df_complete$DEADLINESS)

# Make sure we don't factor empty strings
df_complete <- filter(df_complete, nchar(PATHOGEN) > 0)
df_complete <- filter(df_complete, nchar(TRANSMISSION) > 0)
# Factor the string fields
df_complete$PATHOGEN <- as.factor(df_complete$PATHOGEN)
df_complete$TRANSMISSION <- as.factor(df_complete$TRANSMISSION)

# Remove incomplete cases
df_complete <- df_complete[complete.cases(df_complete), ]
df_complete <- filter(df_complete, is.na(DEADLINESS) == FALSE)

df_complete

```

<kbd>Filter</kbd>

#### Where greater than 

Filter dataset where <span style="background: #D0A9F5;font-weight:bold">CONTAGIOUSNESS</span> is greater than <span style="font-weight:bold">5.0</span>.

```{r, message=FALSE, echo=TRUE,warning=FALSE}

df_6 <- df_complete%>%  filter(CONTAGIOUSNESS > 5.0)
df_6

```
<kbd>Filter</kbd>

#### Where less than  

Filter dataset where <span style="background: #D0A9F5;font-weight:bold">DEADLINESS</span> is less than <span style="font-weight:bold">1.0</span>.


```{r, message=FALSE, echo=TRUE,warning=FALSE}

df_6 <- df_complete%>%  filter(DEADLINESS < 1.0)
df_6

```

### References
#### citations for narrative and data sources

* Narrative inspiration and data sources: The MicrobeScope Infectious Diseases in Context, [GO](https://informationisbeautiful.net/visualizations/the-microbescope-infectious-diseases-in-context/){target="_blank"}


```{r, echo=FALSE, eval=FALSE, message=FALSE, warning=FALSE, class.source='fold-hide'}

# eval = FALSE as default; run manually as chunk
# PUSH TO PRODUCTION
source("../../../z-scripts/create_production_output.R", local = knitr::knit_global())

```



```{js, message=FALSE, warning=FALSE, echo=FALSE}

// Must be included to position footer
$(function() {
  $('.main-container').after($('.footer'));
})

```

