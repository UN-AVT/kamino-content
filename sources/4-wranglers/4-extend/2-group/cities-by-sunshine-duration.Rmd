---
pagetitle: "Cities by Sunshine Duration"
output:
  bookdown::gitbook: default
documentclass: book
date: "`r Sys.Date()`"
---


```{r, include=FALSE}

knitr::opts_chunk$set(message=FALSE, warning=FALSE, echo=FALSE)
options(scipen=999)  # turn-off scientific notation like 1e+48

library(rvest)
library(tidyverse)
library(reactable)
library(ggiraph)


```

WRANGLER

# Cities by Sunshine Duration
## Unpivot

```{r, out.width="60%", fig.align="center", fig.cap="Photo by Jason Wong on Unsplash"}

masthead <- "assets/jason-wong-unsplash.jpg"
knitr::include_graphics(masthead, dpi=72)

```

> Just living is not enough... One must have sunshine, freedom, and a little flower...\
--- Hans Christian Andersen\

The data we need is stored in several tables on this <a href="https://en.wikipedia.org/wiki/List_of_cities_by_sunshine_duration" target="_blank" rel="noopener noreferrer">Wikipedia page - List of cities by sunshine duration</a>. 

***

### Let the scraping begin...
#### Africa

```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide'}

url = 'https://en.wikipedia.org/wiki/List_of_cities_by_sunshine_duration'

africa = url %>% 
    read_html() %>%
    html_node(xpath = '//*[@id="mw-content-text"]/div[1]/table[2]') %>%
    html_table(fill = TRUE)

africa

```


### Unpivot

Let's unpivot this data to display by city and month.


```{r, message=FALSE, echo=TRUE,warning=FALSE}

df_3 <- africa %>% select(2:13)
df_4 <- df_3  %>%
  pivot_longer(!`City`,names_to = "MONTH", values_to = "TOTAL_SUNSHINE")
df_4

```

### References
#### citations for narrative and data sources

* Narrative and Data Source: https://en.wikipedia.org/wiki/List_of_cities_by_sunshine_duration

<pre>
@misc{wikipediacontributors_2019_list,
  author = {Wikipedia Contributors},
  month = {12},
  publisher = {Wikimedia Foundation},
  title = {List of cities by sunshine duration},
  url = {https://en.wikipedia.org/wiki/List_of_cities_by_sunshine_duration},
  urldate = {2021-07-26},
  year = {2019},
  organization = {Wikipedia}
}
</pre>
