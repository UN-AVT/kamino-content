---
pagetitle: "Diamonds"
output:
  bookdown::gitbook: default
documentclass: book
date: "`r Sys.Date()`"
---


```{r, include=FALSE}

knitr::opts_chunk$set(message=FALSE, warning=FALSE, echo=FALSE)
options(scipen=999)  # turn-off scientific notation like 1e+48

library(tidyverse)
library(ggiraph)
library(kableExtra)

library(showtext)
## Loading Google fonts (https://fonts.google.com/)
font_add_google("Inconsolata", "inconsolata")
# turn on showtext
showtext_auto()

```

WRANGLERS  

# Diamonds
## Sort

```{r, out.width="60%", fig.align="center", fig.cap="Photo by Edgar Soto on Unsplash"}

masthead <- "assets/edgar-soto-gb0BZGae1Nk-unsplash.jpg"
knitr::include_graphics(masthead, dpi=72)

```


> The focus now is on citizen activism, where citizens express themselves in a peaceful and nonviolent way....\
--- Promise Mkwananzi\

***

### Load data


```{r load raw data,  message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide'}

df<-read.csv('./archetypes/diamonds/diamonds.csv', header = TRUE, stringsAsFactors = FALSE)
set.seed(123)
index <- sample(1:nrow(df), 100)
df_1<-df[index,]%>%
  select(carat, cut, color,clarity,price)
row.names(df_1)<-NULL


```

Sort a dataset from a given reference with set order

Here is a reference list for "clarity" based on the <a href = "https://en.wikipedia.org/wiki/Diamond_clarity" target="_blank"> modern GIA grading system </a>.

```{r, message=FALSE, echo=FALSE}

reference<-c('IF','VVS1','VVS2','VS1','VS2','SI1','SI2','I1')

reference

```

Sort the order following the reference list.

```{r , message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 


df_2<-df_1%>% arrange(factor(clarity, levels = reference))


```

### Sort a dataset by column ascending

Sort a number column "carat".

```{r , message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_3<-df_1%>%arrange(carat)

```

Sort a string column "cut".

```{r , message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_4 <- df_1 %>% arrange(cut)

```


### Sort a dataset by column descending

Sort a number column "price".

```{r , message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_5<-df_1%>%arrange(desc(price))


```


Sort a string column "color".

```{r , message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_6<-df_1%>%arrange(desc(color))


```


## Sort by several columns

Let's sort by ascending "price" and descending "carat".

```{r , message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 
df_7<-df_1%>%arrange(price,desc(carat))


```

```{r draw-plot, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide', fig.width= 1920/72, fig.height = 1080/72, out.width = "100%"}
v1 <- ggplot( data=df, aes(carat, price, colour=clarity)) +
    geom_point(alpha = 0.5, size = .75, position="jitter") +
    scale_colour_brewer(
        guide = guide_legend(title = NULL, reverse=T,
            override.aes = list(alpha = 1))) +
    theme_minimal()


girafe(ggobj = v1, width_svg = 1280/72, height_svg = 720/72, options =
list(opts_sizing(rescale = TRUE, width = 1.0)))
```



### References
#### citations for narrative and data sources

* Narrative sources: Diamond Clarity, [GO](https://en.wikipedia.org/wiki/Diamond_clarity){target="_blank"}

#### The data source was built in R. Use function data() in the console to view available datasets.

<pre>
@misc{wikipedia_2021_diamond,
  author = {Wikipedia},
  month = {04},
  title = {Diamond clarity},
  url = {https://en.wikipedia.org/wiki/Diamond_clarity},
  urldate = {2021-06-05},
  year = {2021},
  organization = {Wikipedia}
}
</pre>
