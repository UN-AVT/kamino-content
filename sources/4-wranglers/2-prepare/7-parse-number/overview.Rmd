---
pagetitle: "Kamino"
output: 
  html_document:
    theme: lumen
    css: ["../../../z-assemblers/overview.css", "../../../z-assemblers/ingest.css", "../../../z-assemblers/line-awesome.css"]
    df_print: paged
    mathjax: NULL
    code_folding: show
    include:
      in_header: "../../../z-assemblers/header.html"
      after_body: "../../../z-assemblers/footer.html"
    #self_contained: false
    #lib_dir: libs
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(message=FALSE, warning=FALSE, echo=FALSE)
options(scipen=999)  # turn-off scientific notation like 1e+48

library(htmltools) # needed to include html snippets
library(knitcitations)
library(bibtex)

```

<div class="activity">
INGEST  
</div>

# Ingest a text file
## Workbooks, worksheets, and spreadsheets

> If I had a spreadsheet on my computer, it looked like I was busy...\
--- Nate Silver\

This task refers to the ingest of __unstructured text__, meaning text in a file that does not have a delimiter or discernible data structure.  A common form would be __narrative__ text such as documents, messages, and other forms of written language.

To illustrate the methods, this case contains several text files for Ghana's state of the nation addresses. The state of the nation address is an annual address to parliament given by the president. It typically summarizes the government's agenda and the progress made in the past year as seen by the administration in power.

The case provides various methods to ingest the files and make them available for subsequent processing.

***

# Case(s)

* ...

# Exercises and practice
## Knime and R practice solutions


# Solution

```{r, eval=FALSE, message=FALSE, include=TRUE, echo=TRUE}

# Required libraries
library(tidyverse)
library(readtext)
library(readr)

setwd("C:/GitHub/Perso/kamino/solutions/b-ingest/text-file/r")
file_path <- '../archetypes/ghana-state-of-the-nation-addresses/sona_2008.txt'

### Reading a single text file
# First Method
txt_1 <- readtext(file_path)
df_1 <- as.data.frame(txt_1)

# Alternative
txt_2 <- read_file(file_path)
df_2 <- as.data.frame(txt_2)

# Alternative - Each line as a row
con <- file(file_path, blocking = FALSE)
txt_3 <- readLines(con)
close(con)
df_3 <- as.data.frame(txt_3)

### Reading several text files
base_url <- "../archetypes/ghana-state-of-the-nation-addresses/"
txt_files <- list.files(base_url, pattern="^sona_.*\\.txt$", full.names=TRUE, recursive=FALSE)
txt_files

# Frist method:
txt_set_1 <- c()
for (f in txt_files) {
  txt_set_1 <- c(txt_set_1, paste(readtext(f)))
}
txt_set_1_df <- as.data.frame(txt_set_1)

# Alternative
txt_set_2 <- c()
for (f in txt_files) {
  txt_set_2 <- c(txt_set_2, paste(read_file(f)))
}
txt_set_2_df <- as.data.frame(txt_set_2)

# Alternative - Each line as a row
txt_set_3 <- c()
for (f in txt_files) {
  txt_set_3 <- c(txt_set_3, paste(read_lines(f)))
}
txt_set_3_df <- as.data.frame(txt_set_3)

```



```{js, message=FALSE, warning=FALSE, echo=FALSE}

// Must be included to position footer
$(function() {
  $('.main-container').after($('.footer'));
})

```

