---
pagetitle: "Air Quality in Paris"
output:
  bookdown::gitbook: default
documentclass: book
date: "`r Sys.Date()`"
---

```{r, include=FALSE}

knitr::opts_chunk$set(message=FALSE, warning=FALSE, echo=FALSE)
options(scipen=999)  # turn-off scientific notation like 1e+48

library(tidyverse)
library(lubridate)
library(ggiraph)
library(kableExtra)

library(showtext)
## Loading Google fonts (https://fonts.google.com/)
font_add_google("Inconsolata", "inconsolata")
# turn on showtext
showtext_auto()

```

WRANGLERS  

# Air Quality in Paris
## Parse Date

```{r, out.width="60%", fig.align="center", fig.cap="Photo by Ella Ivanescu on Unsplash"}

masthead <- "assets/ella-ivanescu-JbfhNrpQ_dw-unsplash.jpg"
knitr::include_graphics(masthead, dpi=72)

```

> Clear skies and clean air must become the new normal. We must re-design our cities, reclaiming the streets for cycling and walking, allowing people to walk along streets unpolluted by traffic....\
--- Caroline Lucas\

***

### Load the data

```{r Load raw data, warning=FALSE, echo=TRUE, warning=FALSE,class.source = 'fold-hide'}

df <- read.csv('./archetypes/paris-air-quality/paris-air-quality.csv', header = TRUE, stringsAsFactors = FALSE)
df
```

Let's take a look at the datatypes we have for the date column. 

```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'}

class(df$date)

```

### Wrangle
We'll convert this to the date format and recheck its data type

```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'}

df$date <- as.Date(df$date)
class(df$date)

```


Parsing the date can help us transform the date into a format that is suitable for our use case. Lets explore a few useful things we can do. 

Firstly, we can separate the column 'Date' into three different columns for month, day and year by using <kbd>day</kbd>, <kbd>month</kbd> <kbd>year</kbd> methods.

```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'}

parsed_date <- data.frame(date = df$date, 
       month = month(df$date),
       day = day(df$date),
       year = year(df$date))

parsed_date

```


We can also convert month to their alphabetical format setting label=true within <kbd>month</kbd> method. 

```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'}

parsed_date2 <- data.frame(date = df$date, 
       month = month(df$date, label=TRUE),
       day = day(df$date),
       year = year(df$date))

parsed_date2

```

The library 'lubridate' can also help us parse dates from strings.

We can also convert month to their alphabetical format. The library will examine the entire vector of dates and will parse according to the method in use:
<kbd>ymd()</kbd> year, month and day
<kbd>myd()</kbd>  month, year and day
<kbd>dmy()</kbd> day, month and year
<kbd>dym()</kbd>  day, year and month

For example:

```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'}

x <- "04/01/05"

ymd(x)

myd(x)

dmy(x)

dym(x)

```

### References
#### citations for narrative and data sources
* Narrative and Data sources: IQAir, [GO](https://www.iqair.com/us/france/ile-de-france/paris){target="_blank"}
