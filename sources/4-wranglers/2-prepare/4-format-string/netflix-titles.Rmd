---
pagetitle: "Netflix Titles"
output:
  bookdown::gitbook: default
documentclass: book
date: "`r Sys.Date()`"
---

```{r, include=FALSE}

knitr::opts_chunk$set(message=FALSE, warning=FALSE, echo=FALSE)
options(scipen=999)  # turn-off scientific notation like 1e+48

library(tidyverse)
library(stringi)
library(ggiraph)
library(kableExtra)

library(showtext)
## Loading Google fonts (https://fonts.google.com/)
font_add_google("Inconsolata", "inconsolata")
# turn on showtext
showtext_auto()

```

WRANGLERS  

# TV Shows and Movies listed on Netflix
## Format String

```{r, out.width="60%", fig.align="center", fig.cap="Photo by Alex Alvarez on Unsplash"}

masthead <- "assets/mollie-sivaram-unsplash.jpg"
knitr::include_graphics(masthead, dpi=72)

```

<div class="figure-text">Netflix</div>


> Electricity is really just organized lightning...\
--- George Carlin\

***


### Load data
```{r load raw data, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide'} 


df <- read.csv('archetypes/netflix_titles.csv')
set.seed(123)
index <- sample(1:nrow(df), 100)
df<-df[index,2:13]
row.names(df)<-NULL


```

### Convert Case

#### Uppercase

#### Change <span style="color: #01DF01;font-weight:bold"> type </span> data all to __uppercase__.

```{r method: convert1, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_1<-df
df_1$type<-str_to_upper(df_1$type, locale = "en")

```

### Lowercase

#### Change <span style="color: #0000FF;font-weight:bold"> listed_in </span> data to __lowercase__.

```{r method: convert4, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_4<-df
df_4$listed_in<-str_to_lower(df_4$listed_in, locale = "en")


```

### Sentence
#### OR change <span style="color: #01DF01;font-weight:bold"> description </span> to __sentence__ where only the first character is uppercase.
```{r method: convert2, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_2<-df
df_2$description<-str_to_sentence(df_2$description, locale = "en")

```

### Title 
#### Change <span style="color: #FE9A2E;font-weight:bold"> title </span> to __title__ which capitalizes each word.

```{r method: convert3, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_3<-df
df_3$title<-str_to_title(df_3$title, locale = "en")


```

### Combine
#### Combine <span style="color: #01DF01;font-weight:bold"> country </span> with <span style="color: #01DF01;font-weight:bold"> release_year </span> by adding pattern " - " in between two strings.


```{r method: combine, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_5<-df
df_5$country_release_year<-paste(df_5$country,df_5$release_year, sep=" - ")


```

### Split OR Truncate 

#### Split <span style="color: #0080FF;font-weight:bold"> listed_in </span> by pattern " , " (i.e. split the characters whenever __,__ is encountered).
```{r method: split, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_6<-df
slist<-str_split(string = df_6$listed_in,pattern = "[,]")

Code<-data.frame((Reduce(rbind,slist)))

df_6<-cbind(df_6,Code)
rownames(df_6) <- NULL

```


#### Or Truncate <span style="color: #0080FF;font-weight:bold"> show_id </span>  in a way that only the numbers are displayed. Note that all records have the same __"sxx"__ structure and length.

```{r method: truncate, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_7<-df_4
list<-str_sub(string = df_7$show_id,start=2,end=5)
id<-data.frame((Reduce(rbind,list)))
df_7<-cbind(df_7,id)
rownames(df_7) <- NULL

df_7<-df_7%>%rename(id=X.Reduce.rbind..list..)


```

### Remove non-numeric characters
#### Remove __s__ from <span style="color: #9A2EFE;font-weight:bold"> show_id </span>.
```{r method: non numeric, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_11 <- df_4
df_11$show_id<- gsub("[^0-9]", "", df_11$show_id)

```

### Remove non-alpha-numeric characters
#### Remove non-alpha-numeric characters from <span style="color: #01DF01;font-weight:bold"> title </span>.
```{r method: non alpha numeric, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_10<-df_4
df_10$title_New<-str_replace_all(df_10$title, "[^[:alnum:]]", " ") 

```

### Detect

#### Detect all <span style="color: #FE9A2E;font-weight:bold"> director </span> tha begins with __"C"__.

```{r method: detect1, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_8<-df_7

df_8<-df_8[str_sub(string = df_8$director,start=1, end=1)=='C',c('show_id','type','title','director','cast')]
rownames(df_8) <- NULL


```

#### Detect all <span style="color: #01DF01;font-weight:bold"> cast </span> that contains special character __" - "__. 

```{r method: detect2, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 

df_9<-df_4
df_9<-df_9[str_detect(string = df_9$cast,'[-]'),c('show_id','type','title','director','cast')]
rownames(df_9) <- NULL

```

## Normalize

     
#### For a better understanding, take a closer look at how <span style="color: #FE9A2E;font-weight:bold"> cast </span> are presented.

```{r method: normalize, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-show'} 
df_10<-df_9
df_10$cast<-stri_trans_nfd(df_9$cast)

```

#### After we normalize this data, the characters are decomposed in a way that makes further data manipulation more feasible.

# References
## The citations and data sources used for this case

The original data file used in this wrangler task was captured from the <a href="https://www.kaggle.com/shivamb/netflix-shows" target="_blank">TV Shows and Movies listed on Netflix</a> source which was published by  <a href="https://flixable.com/" target="_blank"> FLIXABLE</a> website. 

<pre>
@misc{bansal_netflix,
  author = {Bansal, Shivan},
  title = {Netflix Movies and TV Shows},
  url = {https://www.kaggle.com/shivamb/netflix-shows},
  urldate = {2021-05-28},
  organization = {kaggle.com}
}

@misc{flixable_2010_list,
  author = {Flixable},
  title = {List of Movies and TV Shows on Netflix | Flixable},
  url = {https://flixable.com/},
  urldate = {2021-05-28},
  year = {2010},
  organization = {Flixable.com}
}
</pre>
