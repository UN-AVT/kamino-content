---
pagetitle: "UN Member Countries"
output:
  html_document:
    theme: lumen
    css: "../../../z-assemblers/assets/styles/content.css"
    df_print: paged
    mathjax: NULL
    code_folding: show
    include:
      in_header: ["../../../z-assemblers/fragments/google-analytics.html", "../../../z-assemblers/fragments/header.html"]
      after_body: "../../../z-assemblers/fragments/footer.html"
    self_contained: false
    lib_dir: "vendor"
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(message=FALSE, warning=FALSE, echo = FALSE)
options(scipen=999)  # turn-off scientific notation like 1e+48

# Clear environment and memory
rm(list = ls(all.names = TRUE)) #will clear all objects includes hidden objects.
gc() #free up memrory and report the memory usage.

library(tidyverse)
library(ggplot2)
library(ggrepel)
library(gridExtra)
library(ggthemes)

library(showtext)
## Loading Google fonts (https://fonts.google.com/)
font_add_google("Inconsolata", "inconsolata")
# turn on showtext
showtext_auto()

```


<div class="activity">
TEMPORALS 
</div>

# UN Member Countries
## Timeline

```{r, out.width = "60%", fig.align = 'center', fig.cap="Photo by Davi Mendes on Unsplash"}

masthead <- "assets/davi-mendes-unsplash.jpg"
knitr::include_graphics(masthead, dpi=72)

```

> All countries, big or small, strong or weak, are equal members of the United Nations...\
--- Nong Duc Manh


***

### Ingest the Dataa


```{r, message=FALSE, warning=FALSE, echo=TRUE, class.source = 'fold-hide'}

# Load csv data file

df_timeline = read.csv("./archetypes/un-history/un-member-state-timeline-cumsum.csv", header = TRUE, stringsAsFactors = FALSE)
df_timeline

```

# Section
## Subsection

```{r, echo=FALSE, fig.width=12, fig.height=8}

theme_opts <- theme(
    plot.title = element_text(color = "black", size = 12, face = "bold"),
    plot.subtitle = element_text(color = "black", size = 8),
    plot.caption = element_text(color = "#555555", size = 8),
    axis.title.x = element_blank(),
    axis.title.y = element_blank(),
    # axis.text.x = element_text(vjust = 12),
    panel.border = element_blank(),
    panel.background = element_blank(),
    panel.grid.minor = element_blank(), # remove minor gridlines
    panel.grid.major.x = element_blank(), # remove x (vertical) gridlines
    legend.title = element_blank(), # remove legend title
    legend.text = element_text(color = "black", size = 8),
    legend.position='top'
  )

series_pal <- c("Africa" = "#6fccdc",
                "Americas" = "#f2bd48",
                "Asia" = "#00597a",
                "Europe" = "#e65035",
                "Middle East" = "#9b4050")

# Plot
v1 <- ggplot() + 
  geom_segment(data = df_timeline, aes(x = conflict_start_year, y = deaths, xend = conflict_end_year, yend = deaths), colour = "black" ) +
  geom_point(data = df_timeline, aes(x = conflict_start_year, y = deaths), colour = "black" ) +
  geom_point(data = df_timeline, aes(x = conflict_end_year, y = deaths), colour = "black" ) +
  geom_text_repel(data = df_timeline, aes(x = mid_year, y = deaths+3, label = conflict_name), hjust = "center", vjust = 0, color = "#333333", size = 3, fontface = 1 ) +
  scale_x_continuous(breaks=seq(1900, 2020, 10)) +
  scale_y_continuous(trans='log10') + # trans='sqrt'
  scale_fill_manual(values = series_pal) +
  scale_color_manual(values = series_pal) +
  labs( title = "Combat deaths per 100,000 people worldwide",
        subtitle = "By nationality, grouped by region",
        caption = "Sources: Peace Research Institute Oslo; Uppsala Conflict Data Program; Centre for\nSystemic Peace; Maddison Project Database; iCasualties.org; World Bank; The Economist") +
  theme_bw() +
  theme_opts

v1

```

# Section
## Subsection

```{r, echo=FALSE, fig.width=12, fig.height=8}


  
```

# Section
## Subsection

```{r, echo=FALSE, fig.width=12, fig.height=8}

  
```

# Section
## Subsection

```{r, echo=FALSE}

# Save plot to svg file
# width and height defined for kamino aspect ratio
# ggsave(filename = "which-countries-are-most-likely-to-fight-wars.svg", plot = v1, width = 12, height = 8)

```


# Examples, Exercises and practice
## Additional resources to explore...



# References
## The citations and data sources used for this case



```{r generateBibliography, echo=FALSE, eval=TRUE, message=FALSE, warning=FALSE}

# cleanbib()
# read.bibtex(file = "./citations.bib")

```



```{r, message=FALSE, warning=FALSE, echo=FALSE}

# echo=FALSE will exclude block from code folding
# Example for including external html content when needed
htmltools::includeHTML("mark-complete-button.html")

```



```{r, child='mark-complete-click.Rmd'}

# JS event handler for button click

```



```{js, message=FALSE, warning=FALSE, echo=FALSE}

// Must be included to position footer
$(function() {
  $('.main-container').after($('.footer'));
})

```

